/*! 2015 Baidu Inc. All Rights Reserved */
define("search/hospitals/hospital",["require","search/search","home/department-detail"],function(require){var e=require("search/search");return{init:function(){e.init();var t=$("#current-area"),i=this;if(e.backTop(),e.areaEvent(),t.text().length>5)t.html(t.text().substr(0,4)+"...");$(".search_box").children(".area").children("div").css("display","block"),$(".depart-select").delegate("li","click",function(t){var n=t.target;$(n).attr("data-value"),$(n).parents(".select-detail").attr("data-type");$(n).parents(".select-detail").find("li").each(function(){$(this).removeClass("select-cur")}),$(n).addClass("select-cur"),e.searchTag=0,e.httpGet("/pc/hospital/list",i.getFilterData(),"hospital",$("#hospital-list-ul"),1,$(".pagers"),"hospitalList")}),e.httpGet("/pc/hospital/list",i.getFilterData(),"hospital",$("#hospital-list-ul"),1,$(".pagers"),"hospitalList"),i.sortHospital()},getFilterData:function(){var e={};if(e.key=$("input[name='key']").attr("data-value"),e.cityId=$(".city-list").find(".current-select").attr("data-value"),e.provId=$("#current-area").attr("data-provid"),e.pageSize=10,e.sortType=$(".hospital-sort").find(".sort-cur").attr("data-value"),e.isInsurance=$(".hospital-sort").find("input").length>0?1==$(".hospital-sort").find("input")[0].checked?1:0:"",e.hospitalType=$(".hospital-type").find(".select-cur").attr("data-value"),e.hospitalLvl=$(".hospital-level").find(".select-cur").attr("data-value"),"region"==$("#region").attr("data-place"))e.regionId=$("#region").find(".select-cur").attr("data-value");else if("city"==$("#region").attr("data-place"))e.cityId=$("#region").find(".select-cur").attr("data-value");return e.isRecommend=$(".hospital-list").attr("data-isRecommend"),e},sortHospital:function(){var t=this;$(".hospital-sort").delegate("span","click",function(i){var n=i.target;if(1==$(this).index())$(this).html("预约量从高到低"),$(this).addClass("sort-cur").siblings("span").removeClass("sort-cur");else if(0==$(this).index())$(".hospital-sort").find("span").eq(1).html("预约量"),$(this).addClass("sort-cur").siblings("span").removeClass("sort-cur");else if(2==$(this).index())if(n.innerHTML==$(".medical-care").attr("data-value"))if(1==$(this).find("input")[0].checked)$(this).find("input")[0].checked=!1;else $(this).find("input")[0].checked=!0;e.searchTag=0,e.httpGet("/pc/hospital/list",t.getFilterData(),"hospital",$("#hospital-list-ul"),1,$(".pagers"),"hospitalList")})},noResult:function(){var t=this;$(".pagination-x-list").remove(),$(".container").hide(),$(".right-sidebar").hide();var i=require("home/department-detail");i.departRelative(t.getFilterData(),{listType:0,pageSize:15,key:"",departLevel1Id:1},{listType:7,pageSize:8,key:""}),$(".no-result").show(),e.searchTag=0},hasResult:function(){$(".no-result").hide(),$(".pagination-x").show(),$(".container").show(),$(".right-sidebar").show()}}});