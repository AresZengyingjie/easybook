/*! 2015 Baidu Inc. All Rights Reserved */
jQuery.extend({createUploadIframe:function(e,t){var r="jUploadFrame"+e,o='<iframe id="'+r+'" name="'+r+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject)if("boolean"==typeof t)o+=' src="javascript:false"';else if("string"==typeof t)o+=' src="'+t+'"';return o+=" />",jQuery(o).appendTo(document.body),jQuery("#"+r).get(0)},createUploadForm:function(e,t,r,o){var a="jUploadForm"+e,n="jUploadFile"+e,u=jQuery('<form  action="" method="POST" name="'+a+'" id="'+a+'" enctype="multipart/form-data"></form>');if(r)for(var i in r)jQuery('<input type="hidden" name="'+i+'" value="'+r[i]+'" />').appendTo(u);var c=jQuery("#"+t),d=jQuery(c).clone(!0);return c.attr("id",n),c.before(d),c.appendTo(u),jQuery(u).css("position","absolute"),jQuery(u).css("top","-1200px"),jQuery(u).css("left","-1200px"),jQuery(u).appendTo("body"),u},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),r=jQuery.createUploadForm(t,e.fileElementId,"undefined"==typeof e.data?!1:e.data,e.fileElement),o=(jQuery.createUploadIframe(t,e.secureuri),"jUploadFrame"+t),a="jUploadForm"+t;if(e.global&&!jQuery.active++)jQuery.event.trigger("ajaxStart");var n=!1,u={};if(e.global)jQuery.event.trigger("ajaxSend",[u,e]);var i=function(t){var a=document.getElementById(o);try{if(a.contentWindow)u.responseText=a.contentWindow.document.body?a.contentWindow.document.body.innerHTML:null,u.responseXML=a.contentWindow.document.XMLDocument?a.contentWindow.document.XMLDocument:a.contentWindow.document;else if(a.contentDocument)u.responseText=a.contentDocument.document.body?a.contentDocument.document.body.innerHTML:null,u.responseXML=a.contentDocument.document.XMLDocument?a.contentDocument.document.XMLDocument:a.contentDocument.document}catch(i){jQuery.handleError(e,u,null,i)}if(u||"timeout"==t){n=!0;var c;try{if(c="timeout"!=t?"success":"error","error"!=c){var d=jQuery.uploadHttpData(u,e.dataType);if(e.success)e.success(d,c);if(e.global)jQuery.event.trigger("ajaxSuccess",[u,e])}else jQuery.handleError(e,u,c)}catch(i){c="error",jQuery.handleError(e,u,c,i)}if(e.global)jQuery.event.trigger("ajaxComplete",[u,e]);if(e.global&&!--jQuery.active)jQuery.event.trigger("ajaxStop");if(e.complete)e.complete(u,c);jQuery(a).unbind(),setTimeout(function(){try{jQuery(a).remove(),jQuery(r).remove()}catch(t){jQuery.handleError(e,u,null,t)}},100),u=null}};if(e.timeout>0)setTimeout(function(){if(!n)i("timeout")},e.timeout);try{var r=jQuery("#"+a);if(jQuery(r).attr("action",e.url),jQuery(r).attr("method","POST"),jQuery(r).attr("target",o),r.encoding)jQuery(r).attr("encoding","multipart/form-data");else jQuery(r).attr("enctype","multipart/form-data");jQuery(r).submit()}catch(c){jQuery.handleError(e,u,null,c)}return jQuery("#"+o).load(i),{abort:function(){try{jQuery("#"+o).remove(),jQuery(r).remove()}catch(e){}}}},uploadHttpData:function(r,type){var data=!type;if(data="xml"==type||data?r.responseXML:r.responseText,data=data.replace(/<\/pre>$/,""),data=data.replace(/<.*>/,""),"script"==type)jQuery.globalEval(data);if("json"==type)eval("data = "+data);if("html"==type)jQuery("<div>").html(data).evalScripts();return data},handleError:function(e,t,r,o){if(e.error)e.error(t,r,o);if(e.global)jQuery.event.trigger("ajaxError",[t,e,o])}});